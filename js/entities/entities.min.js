game.BirdEntity=me.Entity.extend({init:function(a,c){var b={};b.image="clumsy";b.width=100;b.height=71.75;this._super(me.Entity,"init",[a,c,b]);this.alwaysUpdate=true;this.body.gravity=0.2;this.maxAngleRotation=Number.prototype.degToRad(-30);this.maxAngleRotationDown=Number.prototype.degToRad(35);this.renderable.addAnimation("flying",[0,1,2,3,4,5,6,7,8,9,10,11,12]);this.renderable.addAnimation("idle",[0]);this.renderable.setCurrentAnimation("flying");this.renderable.scale(2);this.body.removeShapeAt(0);this.body.addShape(new me.Polygon(0,0,[new me.Vector2d(-50,25),new me.Vector2d(-50,-25),new me.Vector2d(50,0)]));this.flyTween=new me.Tween(this.pos);this.flyTween.easing(me.Tween.Easing.Exponential.InOut);this.currentAngle=0;this.angleTween=new me.Tween(this);this.angleTween.easing(me.Tween.Easing.Exponential.InOut);this.endTween=null;this.collided=false;this.gravityForce=0.2},update:function(c){var b=this;this.pos.x=60;if(!game.data.start){return this._super(me.Entity,"update",[c])}this._super(me.Entity,"update",[c]);if(me.input.keyStatus("fly")){game.data.pressed=game.data.pressed||[];game.data.pressed.push(Math.round(game.data.steps*100));this.gravityForce-=0.5}else{this.gravityForce+=0.2}if(this.gravityForce<-2){this.gravityForce=-2}if(this.gravityForce>2){this.gravityForce=2}this.pos.y+=me.timer.tick*this.gravityForce;var d=900-this.pos.y;d=d/500;me.collision.check(this);game.data.steps+=0.01;var a=300;if(this.pos.y<=a||this.collided){game.data.start=false;this.endAnimation();return false}return true},onCollision:function(a){var b=a.b;if(b.type==="cabinet"||b.type==="desk"||b.type==="light"||b.type==="ground"){me.device.vibrate(500);this.collided=true}},endAnimation:function(){me.game.viewport.fadeOut("#fff",100);var a=this.pos.y;this.endTween=new me.Tween(this.pos);this.endTween.easing(me.Tween.Easing.Exponential.InOut);this.flyTween.stop();this.renderable.currentTransform.identity();this.renderable.currentTransform.rotate(Number.prototype.degToRad(90));var b=me.game.viewport.height-this.renderable.width/2-82;this.endTween.to({y:a},1000).to({y:b},1000).onComplete(function(){me.state.change(me.state.GAME_OVER)});this.endTween.start()}});game.DeskEntity=me.Entity.extend({init:function(a,g){var c={};var b=true;if(game.random()>0.5){b=false;c.image=this.image=me.loader.getImage("desk_lrg");c.width=375;c.height=400;c.framewidth=375;c.frameheight=400;a=a-80}else{c.image=this.image=me.loader.getImage("desk_sml");c.width=222;c.height=354;c.framewidth=222;c.frameheight=354;a=a-20}this._super(me.Entity,"init",[a,g,c]);this.alwaysUpdate=true;this.body.gravity=0;this.body.removeShapeAt(0);if(b){this.body.addShapesFromJSON(me.loader.getJSON("shapesdef"),"desk-sml")}else{this.body.addShapesFromJSON(me.loader.getJSON("shapesdef"),"desk-lrg")}var f=-5;var e=-15;var d=game.data.steps/-10;d+=f;this.body.vel.set(d,0);this.type="desk"},update:function(a){if(!game.data.start){return this._super(me.Entity,"update",[a])}this.pos.add(this.body.vel);if(this.pos.x<-this.image.width){me.game.world.removeChild(this)}me.Rect.prototype.updateBounds.apply(this);this._super(me.Entity,"update",[a]);return true},});game.CabinetEntity=me.Entity.extend({init:function(a,f){var b={};b.image=this.image=me.loader.getImage("cabinet");b.width=172;b.height=453;b.framewidth=172;b.frameheight=453;this._super(me.Entity,"init",[a,f,b]);this.alwaysUpdate=true;this.body.gravity=0;var e=-5;var d=-15;var c=game.data.steps/-10;c+=e;this.body.removeShapeAt(0);this.body.addShapesFromJSON(me.loader.getJSON("shapesdef"),"office_assets_kiwi_cabinet");this.body.vel.set(c,0);this.type="cabinet"},update:function(a){if(!game.data.start){return this._super(me.Entity,"update",[a])}this.pos.add(this.body.vel);if(this.pos.x<-this.image.width){me.game.world.removeChild(this)}me.Rect.prototype.updateBounds.apply(this);this._super(me.Entity,"update",[a]);return true},});game.LightEntity=me.Entity.extend({init:function(a,f){var b={};b.image=this.image=me.loader.getImage("light");b.width=140;b.height=804;b.framewidth=140;b.frameheight=804;this._super(me.Entity,"init",[a,f,b]);this.alwaysUpdate=true;this.body.gravity=0;var e=-5;var d=-15;var c=game.data.steps/-10;c+=e;this.body.vel.set(c,0);this.type="cabinet"},update:function(a){if(!game.data.start){return this._super(me.Entity,"update",[a])}this.pos.add(this.body.vel);if(this.pos.x<-this.image.width){me.game.world.removeChild(this)}me.Rect.prototype.updateBounds.apply(this);this._super(me.Entity,"update",[a]);return true},});game.RivalEntity=me.Entity.extend({init:function(a,f){var b={};b.image=this.image=me.loader.getImage("rival");b.width=100;b.height=71;this._super(me.Entity,"init",[a,f,b]);this.alwaysUpdate=true;this.body.gravity=0;var e=-5;var d=-15;var c=game.data.steps/-10;c+=e;this.body.vel.set(c,0);this.type="horse"},update:function(a){if(!game.data.start){return this._super(me.Entity,"update",[a])}this.pos.add(this.body.vel);if(this.pos.x<-100){me.game.world.removeChild(this)}me.Rect.prototype.updateBounds.apply(this);this._super(me.Entity,"update",[a]);return true},});game.PipeGenerator=me.Renderable.extend({init:function(){this._super(me.Renderable,"init",[0,me.game.viewport.width,me.game.viewport.height,92]);this.alwaysUpdate=true;this.generate=0;this.pipeFrequency=92;this.pipeHoleSize=1340;this.posX=me.game.viewport.width},update:function(b){if(this.generate++%this.pipeFrequency==0){var c=(game.random()*500)+350;console.log(c);var a=new me.pool.pull("horse",this.posX,c);me.game.world.addChild(a,10)}this._super(me.Entity,"update",[b])},});game.TextInput=me.Renderable.extend({init:function(a,e,b,c,d){this.$input=$('<input type="'+b+'" required placeholder="'+d+'">').css({left:a,top:e});switch(b){case"text":this.$input.attr("maxlength",c).attr("pattern","[a-zA-Z0-9_-]+");break;case"number":this.$input.attr("max",c);break}$(me.video.getWrapper()).append(this.$input)},destroy:function(){this.$input.remove()}});game.Ground=me.Entity.extend({init:function(a,c){var b={};b.image=me.loader.getImage("ground");b.width=707;b.height=126;this._super(me.Entity,"init",[a,c,b]);this.alwaysUpdate=true;this.body.gravity=0;this.body.vel.set(-4,0);this.type="ground"},update:function(a){this.pos.add(this.body.vel);if(this.pos.x<-this.renderable.width){this.pos.x=me.video.renderer.getWidth()-100}me.Rect.prototype.updateBounds.apply(this);return this._super(me.Entity,"update",[a])},});game.RestartButton=me.GUI_Object.extend({init:function(a,c){var b={};b.image="try_again";b.spritewidth=62;b.spriteheight=84;this.floating=true;this._super(me.GUI_Object,"init",[a,c,b])},onClick:function(a){console.log("Tweetybird restrt");me.state.change(me.state.MENU);return false},onOver:function(a){document.body.style.cursor="pointer"},onOut:function(a){document.body.style.cursor="auto"}});